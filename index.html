<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BBFM Subcontractor Database</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://unpkg.com/papaparse@5.3.0/papaparse.min.js"></script>
</head>
<body class="bg-gray-50">
    <!-- Main App Container -->
    <div class="min-h-screen flex flex-col">
        <!-- Header Component -->
        <custom-header></custom-header>
    <!-- Priority Rules Banner -->
    <div class="bg-d5b480 bg-opacity-20 border-b border-d5b480 px-4 py-2">
        <div class="max-w-7xl mx-auto">
            <h3 class="font-semibold text-020528">Priority Rules:</h3>
            <ul class="text-sm text-020528">
<li>• Scaffolding: Midas is FIRST CALL.</li>
                    <li>• Passive Fire: ARK is FIRST CALL; escalate to Protest if ARK can't cover.</li>
                    <li>• BBAS can be contacted immediately for active fire systems.</li>
                </ul>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="flex-grow container mx-auto px-4 py-6">
    <!-- Search and Filter Section -->
    <div class="bg-efeee9 rounded-lg shadow-sm p-4 mb-6 border border-020528 border-opacity-10">
<div class="flex flex-col md:flex-row gap-4">
                    <!-- Global Search -->
                    <div class="flex-grow">
                        <label for="global-search" class="block text-sm font-medium text-gray-700 mb-1">Search All Fields</label>
                        <div class="relative">
                            <input type="text" id="global-search" placeholder="Search contractors..." 
                                   class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i data-feather="search" class="text-gray-400"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Add New Button -->
                    <div class="flex items-end">
                        <button id="add-new-btn" class="bg-020528 hover:bg-opacity-90 text-efeee9 px-4 py-2 rounded-md flex items-center gap-2 transition-all">
<i data-feather="plus"></i> Add New
                        </button>
                    </div>
                </div>
                
                <!-- Filter Row -->
                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <!-- Trade Category Filter -->
                    <div>
                        <label for="trade-category" class="block text-sm font-medium text-gray-700 mb-1">Trade Category</label>
                        <select id="trade-category" multiple class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            <option value="Electrical">Electrical</option>
                            <option value="Plumbing">Plumbing</option>
                            <option value="HVAC">HVAC</option>
                            <option value="Fire Safety">Fire Safety</option>
                        </select>
                    </div>
                    
                    <!-- Priority Status Filter -->
                    <div>
                        <label for="priority-status" class="block text-sm font-medium text-gray-700 mb-1">Priority Status</label>
                        <select id="priority-status" multiple class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            <option value="PRIMARY">PRIMARY / FIRST CALL</option>
                            <option value="Immediate">Immediate</option>
                            <option value="Escalation">Escalation</option>
                            <option value="Approved">Approved</option>
                        </select>
                    </div>
                    
                    <!-- Coverage Area Filter -->
                    <div>
                        <label for="coverage-area" class="block text-sm font-medium text-gray-700 mb-1">Coverage Area</label>
                        <input type="text" id="coverage-area" placeholder="Filter by area..." 
                               class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    
                    <!-- Missing Info Toggle -->
                    <div class="flex items-end">
                        <div class="flex items-center">
                            <input id="missing-info" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="missing-info" class="ml-2 block text-sm text-gray-700">Missing contact info</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Import/Export Buttons -->
            <div class="flex flex-wrap gap-3 mb-4">
                <button id="import-btn" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md flex items-center gap-2 hover:bg-gray-50">
                    <i data-feather="upload"></i> Import
                </button>
                <button id="export-csv-btn" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md flex items-center gap-2 hover:bg-gray-50">
                    <i data-feather="download"></i> Export CSV
                </button>
                <button id="export-json-btn" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md flex items-center gap-2 hover:bg-gray-50">
                    <i data-feather="download"></i> Export JSON
                </button>
                <button id="add-from-url-btn" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md flex items-center gap-2 hover:bg-gray-50">
                    <i data-feather="link"></i> Add from URL
                </button>
            </div>
                <!-- Contractor Table -->
                <div class="bg-efeee9 shadow-sm rounded-lg overflow-hidden border border-020528 border-opacity-10">
<div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer sort-header" data-sort="company">
                                    Company Name <i data-feather="chevron-down" class="sort-icon inline"></i>
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Trade
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer sort-header" data-sort="priority">
                                    Priority <i data-feather="chevron-down" class="sort-icon inline"></i>
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Contact
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Coverage
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Services
                                </th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Actions
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="contractor-table-body">
                            <!-- Sample Data - Will be populated by JavaScript -->
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="font-medium text-gray-900">Midas Scaffolding</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                        Scaffolding
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                                        PRIMARY
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm text-gray-900">John Smith</div>
                                    <div class="text-sm text-gray-500">john@midas.com</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    London, South East
                                </td>
                                <td class="px-6 py-4">
                                    <div class="flex flex-wrap gap-1">
                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200">
                                            scaffolding
                                        </span>
                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200">
                                            temporary
                                        </span>
                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200">
                                            structures
                                        </span>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <button class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>
                                    <button class="text-red-600 hover:text-red-900">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>

        <!-- Footer Component -->
        <custom-footer></custom-footer>
    </div>

    <!-- Modal Placeholder -->
    <div id="modal-container" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black bg-opacity-50">
        <!-- Modal content will be inserted here by JavaScript -->
    </div>

    <!-- Scripts -->
    <script src="components/header.js"></script>
    <script src="components/footer.js"></script>
    <script src="script.js"></script>
    <script>
        feather.replace();
    </script>
<script src="https://huggingface.co/deepsite/deepsite-badge.js"></script>
</body>
</html>